# 全站 UI / 交互任务流审计与中等改造设计

日期：2026-02-26  
状态：已确认（Brainstorming 结果落盘）  
项目：`physicsAnimations`

## 1. 目标与范围

本设计目标是对当前项目进行一次“任务流优先”的 UI/交互审计，并给出不改后端接口前提下的中等改造方案。重点优先级已经确认：

- 优先级 1：关键流程效率
- 优先级 2：反馈与状态清晰度
- 优先级 3：视觉一致性

审计范围覆盖全站：

- 公开端：`CatalogView`、`ViewerView`
- 后台端：`AdminDashboardView`、`AdminContentView`、`AdminUploadsView`、`AdminTaxonomyView`、`AdminSystemView`、`AdminAccountView`

本轮不是纯视觉美化，也不是后端能力扩展；核心是降低任务摩擦、缩短完成路径、减少误操作。

## 2. 审计架构（Task-Flow First）

采用“按任务目标拆分，而不是按页面拆分”的审计模型。主线分为四条：

1. 发现内容：目录搜索与筛选，进入目标内容
2. 预览与切换：预览模式切换、回退与外链打开
3. 后台内容维护：新增、编辑、删除、恢复、分类维护
4. 系统与账号维护：配置、校验、保存、同步与账号修改

每条任务流都用同一模板记录：

- `目标任务`
- `起点路由`
- `最短完成路径（步数）`
- `关键决策点`
- `系统反馈`
- `退出/回退成本`
- `问题级别`
- `改造建议`

问题分级规则：

- `P0`：阻断任务完成或高概率造成不可逆误操作
- `P1`：任务可完成但效率明显偏低或反馈语义不清
- `P2`：视觉一致性/可读性问题，影响理解速度

评分权重：

- 流程效率：50%
- 状态反馈：30%
- 视觉一致性：20%

## 3. 审计执行清单

### 3.1 公开端

- Catalog：搜索输入、分组/分类切换、overflow（更多）选择、空状态、卡片进入预览
- Viewer：加载态、错误态、截图/交互切换、外链打开、返回后状态连续性

### 3.2 后台端

- Content：搜索、分页、编辑展开、保存回显、删除/恢复
- Uploads：上传入口、文件反馈、编辑保存、删除路径
- Taxonomy：树展开/收起、选择同步、增删改、不可删时的“重置”语义
- System：向导步骤切换、连接校验、保存、同步、未保存拦截
- Account：密码与用户名修改、校验与成功反馈

### 3.3 证据采集

每个结论必须有可复核证据：

- 实际点击序列（最短路径与异常路径）
- 当前反馈文案（成功/失败/加载/禁用）
- 是否出现二义性（按钮名称、状态含义、结果去向）
- 是否出现跨页断点（返回后丢状态、定位丢失）

## 4. 中等改造目标架构

在不改后端接口条件下，将交互结构统一为三段式：

- `列表区`：用于检索、筛选、定位目标对象
- `上下文操作区`：用于当前对象的编辑与动作执行
- `统一反馈区`：用于全局/局部操作状态反馈

### 4.1 公开端改造方向

- Catalog：将搜索、分组、分类收敛为统一筛选区；在移动端可折叠，减少横向滚动判断成本
- Viewer：固定操作条（返回、模式切换、打开原页），确保移动端与长内容滚动下的操作可达

### 4.2 后台端改造方向

- Content/Uploads：从“卡片内联编辑”改为“列表 + 侧边编辑面板（移动端抽屉）”
- Taxonomy：保留树形浏览，但编辑面板固定，减少选择切换后的滚动和上下文丢失
- System：维持向导模式，但对每一步的前置条件、禁用理由、结果反馈做明确可见化

## 5. 状态反馈规范（统一交互语义）

建立统一反馈策略：

- 全局级：页面顶部反馈（如权限失败、加载失败）
- 局部级：按钮附近或面板内反馈（如“保存中”“已保存”“失败原因”）

高风险动作（删除/重置）改造原则：

- 从原生 `window.confirm` 升级为语义化确认弹层
- 明确对象名称、影响范围、是否可恢复
- 主按钮与危险按钮视觉等级明确区分

禁用态要求：

- 不能只“灰掉”，必须给出禁用原因（例如：未保存改动、只读模式、必填项缺失）

## 6. 视觉一致性规范

抽离并统一基础 token 与组件语义：

- 间距、圆角、边框、层级、按钮状态
- 面板、表单、空态、错误态、成功态的统一样式结构

一致性目标不是“重做设计系统”，而是避免当前多页面存在的近似但不一致样式导致的认知成本。

## 7. 数据流与边界

本方案不改后端 API，不引入新数据源，不改变权限模型：

- 前端继续通过现有 `adminApi`、`viewerService`、`catalogService` 调用
- 仅调整前端页面结构、状态呈现方式与交互路径
- 现有存储与服务端逻辑保持不变

## 8. 风险与缓解

- 风险：结构调整导致短期使用习惯改变
- 缓解：先交付“流程高摩擦”路径改造，保留核心按钮命名和信息语义

- 风险：反馈位置变化导致“以为未生效”
- 缓解：统一局部反馈位置，保存后提供短时成功提示和状态标记

- 风险：移动端抽屉/面板引入额外状态同步复杂度
- 缓解：先定义单一状态源（当前选中对象），避免重复状态分散在卡片与面板

## 9. 验收与测试策略

测试分三层：

1. 静态结构测试（Vitest + 源码断言）
- 关键区块存在：列表区、操作区、反馈区
- 关键按钮文案和状态语义存在

2. 交互逻辑测试
- 搜索/筛选后定位不丢失
- 编辑保存后回显一致
- 禁用态与禁用原因匹配

3. 响应式与主流程 smoke
- 移动端下关键操作可达
- 公开端与后台主流程可完整闭环

完成定义（DoD）：

- 全站关键任务路径步数下降或等价但决策更清晰
- 关键操作均有明确反馈闭环
- 风险动作确认语义完整
- 视觉语义在主要后台页面达成一致

## 10. 实施优先队列（建议）

1. 优先级 A：`Content / Uploads` 的列表-编辑分离与局部反馈改造
2. 优先级 A：`Viewer` 固定操作条与模式反馈清晰化
3. 优先级 B：`Taxonomy` 选择/编辑上下文稳定化
4. 优先级 B：`System` 向导步骤反馈与禁用原因显式化
5. 优先级 C：统一样式 token 与跨页面视觉语义收敛

---

该文档是本轮 UI/交互审计设计基线，后续实现将按此基线生成实施计划并拆分任务。
