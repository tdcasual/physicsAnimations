# Maintainability & Extensibility DoD

适用范围：所有“模块拆分、能力扩展、插件/适配器新增、跨层契约变更”类型改动。

## 必须满足

1. 契约同步  
   - 后端 schema / 前端调用类型 / 文档三者一致。  
   - 新增或修改接口时，提供对应契约测试。

2. 回归测试  
   - 至少包含 1 条失败先行（RED）测试。  
   - 覆盖新增路径 + 关键回归路径。  
   - 相关护栏测试（如体积上限）保持通过。

3. 迁移与兼容说明  
   - 写明是否破坏兼容。  
   - 若有迁移步骤，提供最小可执行指令。  
   - 标注旧行为与新行为差异。

4. 回滚方案  
   - 说明回滚触发条件。  
   - 提供回滚命令或操作步骤。  
   - 说明回滚后需要的验证动作。

5. 发布门禁证据  
   - 提供 `qa:release` 或等价验证输出证据。  
   - 至少包含：后端测试、前端测试、typecheck、build、核心 smoke。

## PR 检查清单（建议复制到描述）

- [ ] 契约与类型已对齐（后端/前端/文档）  
- [ ] 新行为有 RED->GREEN 测试证据  
- [ ] 护栏测试通过（体积/边界/回归）  
- [ ] 兼容性与迁移说明已补齐  
- [ ] 回滚步骤已写明且可执行  
- [ ] 发布门禁验证已通过并附结果
